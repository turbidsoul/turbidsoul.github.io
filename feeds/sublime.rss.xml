<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Turbidsoul's 小黑屋</title><link>http://blog.turbidsoul.me/</link><description></description><atom:link href="http://blog.turbidsoul.me/feeds/sublime.rss.xml" rel="self"></atom:link><lastBuildDate>Wed, 05 Jun 2013 00:00:00 +0800</lastBuildDate><item><title>sublime插件emmet启动失败</title><link>http://blog.turbidsoul.me/posts/sublimecha-jian-emmetqi-dong-shi-bai.html</link><description>&lt;p&gt;最近发现我的sublime的emmet失效，查看了控制台，发现在sublime启动的失败，启动的时候报了如下的错误：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="gt"&gt;Traceback (most recent call last):&lt;/span&gt;
  File &lt;span class="nb"&gt;&amp;quot;.\sublime_plugin.py&amp;quot;&lt;/span&gt;, line &lt;span class="m"&gt;62&lt;/span&gt;, in &lt;span class="n"&gt;reload_plugin&lt;/span&gt;
  File &lt;span class="nb"&gt;&amp;quot;.\emmet-plugin.py&amp;quot;&lt;/span&gt;, line &lt;span class="m"&gt;710&lt;/span&gt;, in &lt;span class="n"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;
    &lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  File &lt;span class="nb"&gt;&amp;quot;.\emmet-plugin.py&amp;quot;&lt;/span&gt;, line &lt;span class="m"&gt;101&lt;/span&gt;, in &lt;span class="n"&gt;init&lt;/span&gt;
    &lt;span class="n"&gt;update_settings&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  File &lt;span class="nb"&gt;&amp;quot;.\emmet-plugin.py&amp;quot;&lt;/span&gt;, line &lt;span class="m"&gt;231&lt;/span&gt;, in &lt;span class="n"&gt;update_settings&lt;/span&gt;
    &lt;span class="n"&gt;ctx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;js&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  File &lt;span class="nb"&gt;&amp;quot;.\emmet\context.py&amp;quot;&lt;/span&gt;, line &lt;span class="m"&gt;178&lt;/span&gt;, in &lt;span class="n"&gt;js&lt;/span&gt;
    &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eval_js_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  File &lt;span class="nb"&gt;&amp;quot;.\emmet\context.py&amp;quot;&lt;/span&gt;, line &lt;span class="m"&gt;235&lt;/span&gt;, in &lt;span class="n"&gt;eval_js_file&lt;/span&gt;
    &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;js&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eval&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_js_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;resolve_path&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;col&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gr"&gt;Boost.Python.ArgumentError&lt;/span&gt;: &lt;span class="n"&gt;Python argument types in&lt;/span&gt;
&lt;span class="go"&gt;    JSContext.eval(JSContext, str)&lt;/span&gt;
&lt;span class="go"&gt;did not match C++ signature:&lt;/span&gt;
&lt;span class="go"&gt;    eval(class CContext {lvalue}, class std::basic_string&amp;lt;char,struct std::char_traits&amp;lt;char&amp;gt;,class std::allocator&amp;lt;char&amp;gt; &amp;gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;看着错误对着代码看了半天有点莫名其妙，就跑去&lt;a href="https://github.com/sergeche/emmet-sublime/" title="Emmet (ex-Zen Coding) for Sublime Text"&gt;Github&lt;/a&gt;上找找看有没有解决的办法，还别说真有一哥们遇到了同样的问题，&lt;a href="https://github.com/sergeche/emmet-sublime/issues/320" title="emmet fails on startup"&gt;Emmet Issue #320&lt;/a&gt;，Emmet的作者也对这个Issue给了解释和解决办法：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For some reason, you have outdated PyV8 package. Try to quit ST editor, manually remove PyV8 folder from Packages and start ST again: it should load recent PyV8 package automatically&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;大意就是说PyV8的版本过低，需要升级，解决的办法就是关闭sublime并删除sublime插件目录下的PyV8，然后在重启，重启之后sublime就会自动下载PyV8，下载好之后就能正常使用了。&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Turbidsoul Chan</dc:creator><pubDate>Wed, 05 Jun 2013 00:00:00 +0800</pubDate><guid>tag:blog.turbidsoul.me,2013-06-05:posts/sublimecha-jian-emmetqi-dong-shi-bai.html</guid><category>sublime</category><category>python</category><category>emmet</category></item><item><title>sublime执行windows命令时无法输出中文问题</title><link>http://blog.turbidsoul.me/posts/sublimezhi-xing-windowsming-ling-shi-wu-fa-shu-chu-zhong-wen-wen-ti.html</link><description>&lt;p&gt;这是一个很简单的问题，我最近在研究jdk8，使用sublime自定义的编译方式运行，是编译运行的结果显示到sublime控制台上，但是这里如果运行的话会提示 &lt;em&gt;Decode error&lt;/em&gt; 虽然没有太大的影响但是看着总是很难受，而且有时候也不太方便，所以就自己找出问题解决掉。&lt;/p&gt;
&lt;p&gt;解决的方式很简单，按 &lt;strong&gt;ctrl+shift+f&lt;/strong&gt; 进入高级搜索，在 &lt;strong&gt;find&lt;/strong&gt; 中填入 &lt;em&gt;Decode error&lt;/em&gt; 在 &lt;strong&gt;where&lt;/strong&gt; 中填入sublime的插件目录和要所搜的文件类型，如下：&lt;code&gt;D:\SublimeText\Data\Packages,*.py&lt;/code&gt; 因为我们能确定到要搜索的东西在python的代码文件中，所以这里直接搜索 *&lt;em&gt;.py&lt;/em&gt; 文件即可，等上几秒中就能看到搜索结果，结果如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Searching 8509 files for &amp;quot;Decode error&amp;quot;

D:\SublimeText\Data\Packages\Default\exec.py:
  181              str = data.decode(self.encoding)
  182          except:
  183:             str = &amp;quot;[Decode error - output not &amp;quot; + self.encoding + &amp;quot;]\n&amp;quot;
  184              proc = None
  185

D:\SublimeText\Data\Packages\GoSublime\gosubl\gs.py:
  672       return (res, &amp;#39;Unexpected value type&amp;#39;)
  673   except Exception as ex:
  674:      return (default, &amp;#39;Decode Error: %s&amp;#39; % ex)
  675
  676  def json_encode(a):
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;第一個就是我們需要修改的地方，直接上在183行上双击，就能打开文件并定位到需要修改的位置。&lt;/p&gt;
&lt;p&gt;从代码上看，sublime是对执行结果进行了解码，使用的编码是默认的编码，我这里默认的编码是 &lt;strong&gt;utf8&lt;/strong&gt; 但是windows 中文版命令行执行结果的默认编码是 &lt;strong&gt;gbk&lt;/strong&gt; 所以这里解码就会报错，所以我们要做的就是如果这里解码报错，则用gbk在解一次码就行了。&lt;/p&gt;
&lt;p&gt;这里的代码就修改成如下的样子：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nb"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nb"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[Decode error - output not &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encoding&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;]&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;gbk&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;proc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;结论&lt;/h4&gt;
&lt;p&gt;其实这样的做法并不是一个好的解决方案，就和jekyll解决中文问题一样，算是一种暴力的方式，但是暴力的方式通常都是最快最省时间的，但是这样的解决方法也容易埋下隐患。&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Turbidsoul Chan</dc:creator><pubDate>Fri, 31 May 2013 00:00:00 +0800</pubDate><guid>tag:blog.turbidsoul.me,2013-05-31:posts/sublimezhi-xing-windowsming-ling-shi-wu-fa-shu-chu-zhong-wen-wen-ti.html</guid><category>sublime</category><category>python</category></item></channel></rss>